<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <link href="../Content/bootstrap.min.css" rel="stylesheet" />
    <link href="../Content/bootstrap-select.min.css" rel="stylesheet" />
    <link href="../Content/myStyle.css" rel="stylesheet" />
    <script src="../Scripts/jquery-2.1.3.min.js"></script>
    <script src="../Scripts/bootstrap.min.js"></script>
    <script src="../Scripts/bootstrap-select.min.js"></script>
    <script src="../Scripts/spin.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var opts = {
                lines: 12, // The number of lines to draw
                length: 7, // The length of each line
                width: 5, // The line thickness
                radius: 10, // The radius of the inner circle
                corners: 1, // Corner roundness (0..1)
                rotate: 0, // The rotation offset
                direction: 1, // 1: clockwise, -1: counterclockwise
                color: '#000', // #rgb or #rrggbb or array of colors
                speed: 1, // Rounds per second
                trail: 100, // Afterglow percentage
                shadow: true, // Whether to render a shadow
                hwaccel: false, // Whether to use hardware acceleration
                className: 'spinner', // The CSS class to assign to the spinner
                zIndex: 2e9, // The z-index (defaults to 2000000000)
                top: '50%', // Top position relative to parent
                left: '50%' // Left position relative to parent
            };
            var target = document.getElementById('listdiv');
            var spinner = new Spinner(opts).spin(target);
            $(".list-group-item").click(function () {
                //alert($(this).attr('nodeid'));
                if ($(this).attr('nodeid') != null) {
                    showmodal($(this).attr('nodeid'));
                }
            });
            $.ajax({
                type: 'POST',
                url: '../Handlers/WFFlow.ashx',
                data: {},
                success: function suc(result) {
                    for (var i = 0; i < result.length; i++) {
                        var shtml = "";
                        shtml = shtml.concat("<a href='#' class='list-group-item' nodeid='" + result[i].FID + "'>");
                        shtml = shtml.concat("<div class='panel panel-primary'>");
                        shtml = shtml.concat("<div class='panel-heading'>" + result[i].Customer + "</div>");
                        shtml = shtml.concat("<div class='panel-body'>");
                        shtml = shtml.concat("<table class='table  table-striped'>");
                        shtml = shtml.concat("<tr><td>合同号:</td><td class='numFormat'>" + result[i].HCode + "</td></tr>");
                        shtml = shtml.concat("<tr><td>金额:</td><td class='numFormat'>" + result[i].CTotal + "</td></tr>");
                        shtml = shtml.concat("<tr><td>已付:</td><td class='numFormat'>" + result[i].Rmb + "</td></tr>");
                        shtml = shtml.concat("<tr><td>发票:</td><td class='numFormat'>" + result[i].Voice + "</td></tr>");
                        shtml = shtml.concat("<tr><td>本次:</td><td class='numFormat'><h4><span class='label label-success'>" + result[i].CurRmb + "</span></h4></td></tr>");
                        shtml = shtml.concat("<tr><td>标号:</td><td class='numFormat'>" + result[i].BidCode + "</td></tr>");
                        shtml = shtml.concat("<tr><td>申请人:</td><td class='numFormat'>" + result[i].Creater + "</td></tr>");
                        shtml = shtml.concat("<tr><td>日期:</td><td class='numFormat'>" + result[i].CreatedDate + "</td></tr>");
                        shtml = shtml.concat("</table></div>");
                        shtml = shtml.concat("<div class='panel-footer'>" + result[i].FName + "</div>");
                        shtml = shtml.concat("</div></a>");
                        $("#listdiv").append(shtml);
                        spinner.stop();
                    }
                },
                dataType: 'JSON'
            });
        });
        function showmodal(id) {
            $("#myModal").modal();
            $("#mydiv").html(id);
        }
    </script>
</head>
<body style="margin-right:10px">
    <!--审批确认弹出层-->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h3 class="modal-title" id="myModalLabel">确认</h3>
                </div>
                <div class="modal-body">
                    <div id="mydiv"></div>
                    <button type="button" class="btn btn-success btn-lg btn-block">通过</button>
                    <br />
                    <button type="button" class="btn btn-danger btn-lg btn-block">拒绝</button>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default btn-lg" data-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </div>
    <div class="list-group" id="listdiv">
        <!--行模板-->
        <!--<a href="#" class="list-group-item" nodeid="node1">
            <div class="panel panel-primary">
                <div class="panel-heading">辽宁艾美集团生物疫苗有限公司</div>
                <div class="panel-body">
                    <table class="table  table-striped">
                        <tr><td>合同号:</td><td class="numFormat">AM2015-00021</td></tr>
                        <tr><td>金额:</td><td class="numFormat">3,600,000</td></tr>
                        <tr><td>已付:</td><td class="numFormat">1,600,000</td></tr>
                        <tr><td>发票:</td><td class="numFormat">2,000.000</td></tr>
                        <tr><td>本次:</td><td class="numFormat"><h4><span class="label label-success">400,000</span></h4></td></tr>
                        <tr><td>标号:</td><td class="numFormat">AM2015-11212</td></tr>
                        <tr><td>申请人:</td><td class="numFormat">张三</td></tr>
                        <tr><td>日期:</td><td class="numFormat">2015-1-2</td></tr>
                    </table>
                </div>
                <div class="panel-footer">备注:着急发货，已备案</div>
            </div>
        </a>-->
    </div>
</body>
</html>
<script type="text/javascript">

</script>
